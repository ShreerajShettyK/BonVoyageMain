<div class="tot">
    <div class="model-content">
        <!-- User details form -->
        <div class="center">
            <h1 style="color:white;">Travellers Details - Let's Go</h1>
        </div>
        <div class="user-details">

            <!-- <form (submit)="submitUserData()">
                <div class="cont">
                    <div class="c1">
                        <div *ngIf="showNewPersonForm" class="form-group">
                            <label for="name" class="form-label">Full Name:</label>
                            <input type="text" id="name" class="form-input" [(ngModel)]="newPerson.name" name="name"
                                required>
                            <br><br>
                            <label for="dob" class="form-label date-label">Date of Birth:</label>
                            <input type="date" [(ngModel)]="newPerson.dob" name="dob" required>
                            <br><br>
                            <label for="gender" class="form-label gender-label">Gender:</label>
                            <select [(ngModel)]="newPerson.gender" name="gender" required>
                                <option value="" disabled selected>Select Gender</option>
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                            </select>
                            <br><br>
                        </div>
                        <div class="buttons-container">
                           
                            <button type="button" id="add" (click)="addPerson()"
                                [disabled]="!newPerson.name || !newPerson.dob || !newPerson.gender">Add Person</button>
                        </div>
                    </div>
                </div>

                <div class="t1">
                    
                    <table *ngIf="personsData.length > 0">
                        
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Date of Birth</th>
                                <th>Gender</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        
                        <tbody>
                            <tr *ngFor="let person of personsData; let i = index">
                                
                                <td>{{ person.name }}</td>
                                <td>{{ person.dob }}</td>
                                <td>{{ person.gender }}</td>
                                <td>
                                    <button type="button" (click)="editPerson(i)">Edit</button>
                                    <button type="button" (click)="removePerson(i)">Remove</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </form> -->

            <form [formGroup]="newPersonForm" (submit)="submitUserData()">
                <div class="cont">
                    <div class="c1">
                        <div *ngIf="showNewPersonForm" class="form-group">
                            <label for="name">Full Name:</label>
                            <input type="text" [(ngModel)]="newPerson.name" id="name" class="form-input"
                                formControlName="name" required>
                            <!-- Display error message for name field -->
                            <div *ngIf="newPersonForm.get('name').errors && newPersonForm.get('name').dirty"
                                style="color: red;">
                                <div *ngIf="newPersonForm.get('name').hasError('required')">Name is required</div>
                                <div *ngIf="newPersonForm.get('name').hasError('pattern')">Only letters and spaces are
                                    allowed</div>
                            </div>

                            <label for="dob" class="form-label date-label">Date of Birth:</label>
                            <input type="date" [(ngModel)]="newPerson.dob" formControlName="dob" required>
                            <div *ngIf="newPersonForm.get('dob').errors && newPersonForm.get('dob').dirty"
                                style="color: red;">
                                <div *ngIf="newPersonForm.get('dob').hasError('required')">Date of Birth is required
                                </div>
                                <div *ngIf="newPersonForm.get('dob').hasError('invalidDate')">Ivalid date</div>
                            </div>


                            <label for="gender" class="form-label gender-label">Gender:</label>
                            <select [(ngModel)]="newPerson.gender" formControlName="gender" required>
                                <option value="" disabled selected>Select Gender</option>
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                            </select>
                        </div>
                        <div class="buttons-container">
                            <!-- Add Person button -->
                            <button type="button" id="add" (click)="addPerson()" [disabled]="newPersonForm.invalid">Add
                                Person</button>
                        </div>
                    </div>
                </div>
            </form>

            <table *ngIf="personsData.length > 0">

                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Date of Birth</th>
                        <th>Gender</th>
                        <th>Action</th>
                    </tr>
                </thead>

                <tbody>
                    <tr *ngFor="let person of personsData; let i = index">

                        <td>{{ person.name }}</td>
                        <td>{{ person.dob }}</td>
                        <td>{{ person.gender }}</td>
                        <td>
                            <button type="button" (click)="editPerson(i)">Edit</button>
                            <button type="button" (click)="removePerson(i)">Remove</button>
                        </td>
                    </tr>
                </tbody>
            </table>

        </div>
        <!-- Submit button -->
        <div class="button-container1">
            <button type="button" (click)="submitUserData()" [disabled]="personsData.length === 0">Submit</button>
        </div>


    </div>
    <div class="inv">
        <mat-card>
            <mat-card-header style="background-color: #d0efff; display: flex; flex-direction: column;">
                <div style="display: flex; justify-content: space-between;">
                    <div>
                        <h5 style="font-size:90%;color: grey; font-weight: 500;">GRAND TOTAL -
                            {{bookingData.numberOfTravellers}} Travellers</h5>
                    </div>
                    <div
                        style="background-color: red; color: white; padding: 5px; height: 35px; font-weight: 600; font-size: smaller; border-radius: 5px;">
                        50% OFF</div>
                </div>
                <p style="text-decoration: line-through; font-size: medium;color: grey;">₹{{finalAmountInclGst * 2}}
                </p>
                <div class="row">
                    <h3 style="font-weight: 700;">₹{{finalAmountInclGst}} <span
                            style="font-size: small;color: grey;">(Inclusive of GST)</span></h3>
                </div>
                <h4 style="font-weight: 500;margin-bottom: 10px;">Pay Full Amount Now</h4>
            </mat-card-header>
            <div class="vstack gap-3">
                <div class="p-2">
                    <h4 style="margin-top: 5px;">Fare Breakup</h4>
                </div>
                <div class="p-2">
                    <div class="hstack gap-3">
                        <div class="p-2">
                            <h5>Total Basic Cost</h5>
                            <h5 style="font-size:90%;color: grey; font-weight: 500;">*{{bookingData.numberOfTravellers}}
                                Travellers</h5>
                        </div>
                        <div class="p-2">
                            <h5 style="position: absolute;right: 10px;">₹{{bookingData.totalPrice}}</h5>
                        </div>
                    </div>
                </div>
                <hr class="hr" />
                <div class="p-2">
                    <div class="hstack gap-3">
                        <div class="p-2">
                            <h5>Coupon Discount (-25%)</h5>
                            <div class="d-flex justify-content-center align-items-center"
                                style="background-color: #d1f8e6; color: darkgreen; padding: 5px; height: 35px; font-weight: 600; font-size: smaller; border-radius: 5px; width: 55%;">
                                ILOVETRAVEL</div>
                        </div>
                        <div class="p-2">
                            <h5 style="font-size: large;position: absolute;right: 10px;">-₹{{discountAmount}}</h5>
                        </div>
                    </div>
                </div>
                <hr class="hr" />
                <div class="p-2">
                    <div class="hstack gap-3">
                        <div class="p-2">
                            <h5>Fees And Taxes</h5>
                            <h5 style="font-size:90%;color: grey; font-weight: 500;">GST 5.0%</h5>
                        </div>
                        <div class="p-2">
                            <h5 style="position: absolute;right: 10px;">+₹{{gstAmount}}</h5>
                        </div>
                    </div>
                </div>
            </div>

            <mat-card-content>


            </mat-card-content>
            <mat-card-footer>
                <mat-card-actions>
                    <!-- (click)="sendEnquiry('Premium')" -->
                    <button type="button" (click)="openPaymentConfirmation()" [disabled]="personsData.length === 0"
                        matTooltip=""
                        style="background-color:rgb(40, 40, 196);color: white ; border-radius: 10px; width: 100%;height: 50px;">PAY
                        NOW</button>

                </mat-card-actions>
            </mat-card-footer>
        </mat-card>
    </div>

</div>